<div class="min-h-screen bg-[#5675db] flex items-center justify-center p-6">
  <div class="bg-white shadow-xl rounded-2xl p-8 max-w-2xl w-full">
    
    <!-- Project Title -->
    <h2 class="text-3xl font-extrabold text-[#343088] mb-6">Project Details</h2>
    <%= turbo_stream_from "project_#{@project.id}" %>

    <!-- Project Info Card -->
    <div class="bg-gray-50 p-6 rounded-lg shadow-md border">
      <p class="text-lg font-semibold text-gray-900">
        <span class="text-gray-700">Project Name:</span> <%= @project.title %>
      </p>

      <p class="mt-2 text-lg text-gray-800">
        <span class="font-semibold">Description:</span> <%= @project.description %>
      </p>

      <p class="mt-4 text-lg font-semibold text-gray-900">
        Status: 
        <span class="px-3 py-1 rounded-full bg-[#343088] text-white text-sm font-medium">
          <%= @project.status.humanize %>
        </span>
      </p>
    </div>

    <!-- Update Status Form -->
    <div class="mt-6">
      <h3 class="text-xl font-bold text-gray-900">Update Project Status</h3>
      <%= form_with model: @project, url: project_path(@project), method: :patch, data: { turbo: true }, class: "mt-3" do |f| %>
        <div class="mt-2">
          <%= f.select :status, Project.statuses.keys.map { |s| [s.humanize, s] }, {}, 
            { onchange: "this.form.submit();", class: "border rounded-lg p-2 w-full focus:ring-[#343088]" } %>
        </div>
      <% end %>
    </div>

    <!-- Comments Section -->
    <div class="mt-8">
      <h2 class="text-2xl font-bold text-gray-900 mb-4">Comments</h2>

      <div class="bg-gray-50 p-4 rounded-lg shadow-md border">
        <ul id="comments" class="space-y-3">
          <%= turbo_stream_from "project_#{@project.id}_comments" %>
          <% @comments.each do |comment| %>
            <li id="comment_<%= comment.id %>" class="p-4 bg-white rounded-lg shadow border">
              <span class="text-[#343088] font-bold"><%= comment.user.name %>:</span>
              <p class="text-gray-700 mt-1"><%= comment.content.html_safe %></p>
            </li>
          <% end %>
        </ul>

        <!-- Comment Form -->
        <%= form_with model: Comment.new, url: project_comments_path(@project), data: { turbo: true }, class: "mt-4" do |f| %>
          <div class="flex flex-col space-y-3">
            <%= f.text_area :content, placeholder: "Write a comment...", 
                  class: "border rounded-lg p-3 w-full h-20 focus:ring-[#343088]" %>
            <%= f.hidden_field :user_id, value: current_user.id %>
            <%= f.hidden_field :project_id, value: @project.id %>
            <%= f.submit "Post Comment", class: "bg-[#343088] text-white px-5 py-2 rounded-lg hover:bg-[#2b2766] transition" %>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>
